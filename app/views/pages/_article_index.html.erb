<script>
    function userArticleSave(elem, articleId) {
        <% if !logged_in? %>
            window.open('/login', '_self');
        <% else %>
            $.ajax({
                type: "PUT",
                url: "/user_article_save/" + articleId
	        });
        <% end %>
        console.log(elem.innerHTML);
        elem.innerHtml = 'Saved';
    }
</script>

<style>
    /*temp to hide most recents*/
    #article-index-views, .article-index-views-pagination {display: none;}
</style>

<!-- Start page content -->
<section id="page-content" class="page-wrapper archive">
    <div class="zm-section single-post-wrap archive-2 bg-white ptb-15">
        <div class="container">
            <div class="row">
                <!-- Start left side -->
                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 columns">
                    <div class="row">
                        <div class="col-xs-12">
                            <div class="archive-inner">
                                <div class="archive-filter">
                                    <form action="#">
                                        <div class="sing-option zm-trending">
                                            <select name="Category" class="selectDropdown" data-live-search="true" onChange="window.location.href=this.value">
                                                <option value = "<%= root_path %>">Category</option>
                                                <% Category.all.order("name ASC").each do |category| %>
                                                    
                                                    <% if @category != nil && @category.name == category.name %>
                                                        <option value = "<%=category_path(category)%>" selected="selected"><%=category.name%></option>
                                                    <% else %>
                                                        <option value = "<%=category_path(category)%>"><%=category.name%></option>
                                                    <% end %>
                                                    
									        	<% end %>
                                            </select>
                                        </div>
                                        <div class="sing-option zm-state">
                                            <select name="State" class="selectDropdown" data-live-search="true" onChange="window.location.href=this.value">
                                            	<option value = "<%= root_path %>">State</option>
                                            	<% State.all.order("name ASC").each do |state| %>
                                            	
                                            	    <% if @state != nil && @state.name == state.name %>
                                                        <option value = "<%=state_path(state)%>" selected="selected"><%=state.name%></option>
                                                    <% else %>
                                                        <option value = "<%=state_path(state)%>"><%=state.name%></option>
                                                    <% end %>
   
									        	<% end %>
                                            </select>
                                        </div>
                                        <div class="sing-option zm-state">
                                            <select name="Source" class="selectDropdown" data-live-search="true" onChange="window.location.href=this.value">
                                                <option value = "<%= root_path %>">Source</option>
                                                <% Source.all.order("name ASC").each do |source| %>
                                                
                                                    <% if @source != nil && @source.name == source.name %>
                                                        <option value = "<%=source_path(source)%>" selected="selected"><%=source.name%></option>
                                                    <% else %>
                                                        <option value = "<%=source_path(source)%>"><%=source.name%></option>
                                                    <% end %>
    
									        	<% end %>
                                            </select>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row mt-40">
                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                            <div class="row mb-40">
                                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                                    <div class="section-title">
                                        <h2 class="h6 inline-block uppercase header-button active-header-button" id = 'newest-button' onClick="changeSort('Newest')">Newest</h2>
                                        <h2 class="h6 inline-block uppercase header-button inactive-header-button" id = 'popular-button' onClick="changeSort('Popular')">Most Popular</h2>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="zm-posts clearfix">
                                    <div id = 'article-index-new'>
                                        <%= render @recents %>
                                    </div>
                                    <div id = 'article-index-views'>
                                        <%= render @mostviews %>
                                    </div>
                                    
                                    <div class = 'article-index-new-pagination'>
                                        <%= will_paginate @recents %>
                                    </div>
                                    <div class = 'article-index-views-pagination'>
                                        <%= will_paginate @recents %>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- End left side -->
        </div>
    </div>
</section>
<!-- End page content -->
    
    
        